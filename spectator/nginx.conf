worker_processes 1;
daemon off;

events {
    worker_connections 128;
}

http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    # Add MIME types for HLS
    types {
        application/vnd.apple.mpegurl m3u8;
        video/mp2t ts;
    }

    server {
        listen 8080;
        server_name localhost;

        # HLS stream segments
        location /stream/ {
            alias /var/www/stream/;

            # CORS headers for browser playback
            add_header Access-Control-Allow-Origin *;
            add_header Access-Control-Allow-Methods 'GET, OPTIONS';
            add_header Cache-Control no-cache;

            # Disable caching for live stream
            expires -1;
        }
    }
}
